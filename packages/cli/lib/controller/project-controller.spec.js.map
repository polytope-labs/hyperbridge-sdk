{"version":3,"file":"project-controller.spec.js","sourceRoot":"","sources":["../../src/controller/project-controller.spec.ts"],"names":[],"mappings":";AAAA,8DAA8D;AAC9D,mCAAmC;;AAEnC,4CAA+C;AAC/C,oCAA+B;AAC/B,6DAAkE;AAElE,MAAM,WAAW,GAAG;IAClB,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,cAAc;IAC/B,WAAW,EAAE,gBAAgB;IAC7B,IAAI,EAAE,gDAAgD;IACtD,QAAQ,EAAE,EAAE;IACZ,WAAW,EAAE,EAAE;IACf,OAAO,EAAE,EAAE;CACZ,CAAC;AAEF,qDAAqD;AACrD,MAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC;AACrD,MAAM,MAAM,GAAG,CAAC,SAAkB,EAAE,GAAG,IAA2B,EAAE,EAAE;AACpE,oEAAoE;AACpE,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;AAE7C,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;AACxB,QAAQ,CAAC,uCAAuC,EAAE,GAAG,EAAE;IACrD,MAAM,CAAC,CAAC,CAAC,QAAQ,EAAE,2BAA2B,EAAE,KAAK,IAAI,EAAE;QACzD,MAAM,EAAC,WAAW,EAAE,OAAO,EAAE,GAAG,EAAE,WAAW,EAAE,QAAQ,EAAC,GAAG,WAAW,CAAC;QACvE,MAAM,cAAc,GAAG,MAAM,IAAA,kCAAa,EAAC,6BAAiB,EAAE,QAAS,EAAE;YACvE,GAAG,EAAE,GAAG,GAAG,IAAI,WAAW,EAAE;YAC5B,QAAQ;YACR,OAAO;YACP,IAAI,EAAE,CAAC;YACP,IAAI,EAAE,WAAW;YACjB,WAAW;YACX,UAAU,EAAE,IAAI;YAChB,GAAG,EAAE,EAAE;SACR,CAAC,CAAC;QACH,MAAM,IAAA,aAAK,EAAC,EAAE,CAAC,CAAC;QAChB,MAAM,cAAc,GAAG,MAAM,IAAA,kCAAa,EAAC,QAAS,EAAE,GAAI,EAAE,WAAW,EAAE,6BAAiB,CAAC,CAAC;QAC5F,qDAAqD;QACrD,MAAM,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,cAAc,iBAAiB,CAAC,CAAC;QACnF,qDAAqD;QACrD,MAAM,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,cAAc,iBAAiB,CAAC,CAAC;IACjF,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2020-2025 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: GPL-3.0\n\nimport {ROOT_API_URL_PROD} from '../constants';\nimport {delay} from '../utils';\nimport {createProject, deleteProject} from './project-controller';\n\nconst projectSpec = {\n  org: process.env.SUBQL_ORG_TEST,\n  projectName: 'mocked_Project',\n  ipfs: 'QmaVh8DGzuRCJZ5zYEDxXQsXYqP9HihjjeuxNNteSDq8xX',\n  subtitle: '',\n  description: '',\n  logoUrl: '',\n};\n\n// Replace/Update your access token when test locally\nconst testAuth = process.env.SUBQL_ACCESS_TOKEN_TEST;\nconst testIf = (condition: boolean, ...args: Parameters<typeof it>) =>\n  // eslint-disable-next-line jest/valid-title, jest/no-disabled-tests\n  condition ? it(...args) : it.skip(...args);\n\njest.setTimeout(120000);\ndescribe('CLI create project and delete project', () => {\n  testIf(!!testAuth, 'Create project and delete', async () => {\n    const {description, logoUrl, org, projectName, subtitle} = projectSpec;\n    const create_project = await createProject(ROOT_API_URL_PROD, testAuth!, {\n      key: `${org}/${projectName}`,\n      subtitle,\n      logoUrl,\n      type: 1,\n      name: projectName,\n      description,\n      apiVersion: 'v2',\n      tag: [],\n    });\n    await delay(10);\n    const delete_project = await deleteProject(testAuth!, org!, projectName, ROOT_API_URL_PROD);\n    // eslint-disable-next-line jest/no-standalone-expect\n    expect(create_project.key).toMatch(`${process.env.SUBQL_ORG_TEST}/mocked_project`);\n    // eslint-disable-next-line jest/no-standalone-expect\n    expect(delete_project).toMatch(`${process.env.SUBQL_ORG_TEST}/mocked_project`);\n  });\n});\n"]}